<%- include('header'); %>

<div class="container">
	<div class="row">
		<div id="addnewcourse">
		    <h3>添加课程</h3>
		    <form action="/admin/courses" method="post" class="form-horizontal">
		        <input type="hidden" name="_csrf" value="<%= locals.token %>"/>
		    <div class="form-group">
		        <label for="courseName">课程名称</label>
		        <input type="text" id="courseName" class="form-control" name="courseName" required="required"/>
		    </div>
		    <div class="form-group">
		        <label for="courseType">课程类型</label>
		        <select id="courseType" class="form-control" name="courseType" required="required">
		            <option value="general">通修课</option>
		            <option value="professional">专业课</option>
		        </select>
		    </div>
		    <div class="form-group">
		        <label for="courseBelongs">所属学院</label>
		        <select id="courseBelongs" class="form-control" name="courseBelongs" required="required">
		            <% if(colleges[0]) { %>
		            <% colleges.forEach(function(college) { %>
		            <option value="<%= college._id %>"><%= college.collegeName %></option>
		            <% }) %>
		            <% } else { %>
		            <option value="" disabled="disabled">没有有效学院，请先添加学院</option>
		            <% } %>
		        </select>
		    </div>
		    <div class="form-group">
		        <label for="coursepic">课程图像</label>
		        <input type="text" id="coursepic" class="form-control" name="coursepic" required="required"/>
		        <button type="submit" class="btn btn-default">提交</button>
		    </form>
		    </div>
		</div>

		<div class="col-md-12">
		    <table class= "table table-bordered table-hover">
		        <thead>
		        <tr>
		            <th>课程名称</th>
		            <th>课程类型</th>
		            <th>所属学院</th>
		            <th>操作</th>
		        </tr>
		        </thead>
		        <tbody>
		        <% if(courses[0]) { %>
		        <% courses.forEach(function(course) { %>
		        <tr>
		            <td><%= course.courseName %></td>
		            <td><%= course.courseType %></td>
		            <td><%= course.courseBelongs %></td>
		            <td>
		                <form action="/admin/delete-course" method="post">
		                    <input type="hidden" name="_csrf" value="<%= locals.token %>"/>
		                    <input type="hidden" name="courseid" value="<%= course._id %>"/>
		                    <button type="submit" class="btn btn btn-danger">
		                        删除
		                    </button>
		                </form>
		            </td>
		        </tr>
		        <% }) %>
		        <% } else { %>
		        <tr>
		            <td colspan="3">暂无课程</td>
		        </tr>
		        <% } %>
		        </tbody>
		    </table>
		</div>
	</div>
</div>